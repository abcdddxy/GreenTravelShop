<!DOCTYPE html>
<html lang="zh">

<head>
    <title>菜单相关</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link rel="stylesheet" href="css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css" />
    <link rel="stylesheet" href="css/fullcalendar.css" />
    <link rel="stylesheet" href="css/matrix-style.css" />
    <link rel="stylesheet" href="css/matrix-media.css" />
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/jquery.gritter.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" type="text/css" media="all" href="css/fileinput.min.css">
    <style>
        input:not(.file-caption-name):not(.action-button),
        textarea {
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 3px;
            margin-bottom: 10px;
            width: 100%;
            box-sizing: border-box;
            font-family: montserrat;
            color: #2C3E50;
            font-size: 13px;
        }
    </style>
</head>

<body>
    <!--Header-part-->
    <div id="header">
        <h1>
            <a href="#">ZERO</a>
        </h1>
    </div>
    <!--close-Header-part-->

    <!--top-Header-menu-->
    <div id="user-nav" class="navbar navbar-inverse">
    </div>
    <!--close-top-Header-menu-->

    <!--start-top-serch-->
    <div id="search">
        <input type="text" placeholder="查找" />
        <button type="submit" class="tip-bottom" title="Search">
            <i class="icon-search icon-white"></i>
        </button>
    </div>
    <!--close-top-serch-->

    <!--sidebar-menu-->
    <div id="sidebar">
        <a href="#" class="visible-phone">
            <i class="icon icon-home"></i>菜单相关</a>
        <ul>
            <li>
                <a href="main.html">
                    <i class="icon icon-home"></i>
                    <span>总览</span>
                </a>
            </li>
            <li class="active">
                <a href="menu.html">
                    <i class="icon icon-paste"></i>
                    <span>菜单相关</span>
                </a>
            </li>
            <li class>
                <a href="comment.html">
                    <i class="icon icon-pencil"></i>
                    <span>评论相关</span>
                </a>
            </li>
            <li class="submenu">
                <a href="#">
                    <i class="icon icon-signal"></i>
                    <span>订单</span>
                    <span class="label label-important">2</span>
                </a>
                <ul>
                    <li>
                        <a href="orderHistory.html">历史订单</a>
                    </li>
                    <li>
                        <a href="orderCurrent.html">当前订单</a>
                    </li>
                </ul>
            </li>
            <li class="submenu">
                <a href="#">
                    <i class="icon icon-flag"></i>
                    <span>我的店铺</span>
                    <span class="label label-important">3</span>
                </a>
                <ul>
                    <li>
                        <a href="shopDisplay.html">查看店铺</a>
                    </li>
                    <li>
                        <a href="shopAdd.html">添加店铺</a>
                    </li>
                    <li>
                        <a href="shopRemove.html">移除店铺</a>
                    </li>
                </ul>
            </li>
            <li class="submenu">
                <a href="#">
                    <i class="icon icon-file"></i>
                    <span>优惠券</span>
                    <span class="label label-important">2</span>
                </a>
                <ul>
                    <li>
                        <a href="couponDisplay.html">查看优惠券</a>
                    </li>
                    <li>
                        <a href="couponAdd.html">上传优惠券</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <!--sidebar-menu-->

    <!--main-container-part-->
    <div id="content">
        <!--breadcrumbs-->
        <div id="content-header">
            <div id="breadcrumb">
                <a href="main.html" title="回到首页" class="tip-bottom">
                    <i class="icon-home"></i> 首页</a>
                <a href="#" class="current">菜单相关</a>
            </div>
        </div>
        <!--End-breadcrumbs-->

        <div class="panel-group" id="accordion">
            <!-- <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                            特色菜
                        </a>
                    </h4>
                </div>
                <div id="collapseOne" class="panel-collapse collapse">
                    <div class="panel-body">
                        <ul class="list-group list-group-flush">
                            <table class="table" id="menu1">
                                <tr>
                                    <td>干炒牛河</td>
                                    <td>26元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow1(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>特色烤羊腿</td>
                                    <td>86元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow1(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>双椒鱼头</td>
                                    <td>52元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow1(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>风味茄子</td>
                                    <td>24元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow1(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>好吃土豆</td>
                                    <td>18元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow1(this)">删除</a>
                                    </td>
                                </tr>
                            </table>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                            时尚小炒
                        </a>
                    </h4>
                </div>
                <div id="collapseTwo" class="panel-collapse collapse">
                    <div class="panel-body">
                        <ul class="list-group list-group-flush">
                            <table class="table" id="menu2">
                                <tr>
                                    <td>地三鲜</td>
                                    <td>32元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow2(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>鱼香肉丝</td>
                                    <td>36元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow2(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>炒合菜</td>
                                    <td>33元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow2(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>宫保鸡丁</td>
                                    <td>42元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow2(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>干锅手撕包菜</td>
                                    <td>35元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow2(this)">删除</a>
                                    </td>
                                </tr>
                            </table>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                            汤羹
                        </a>
                    </h4>
                </div>
                <div id="collapseThree" class="panel-collapse collapse">
                    <div class="panel-body">
                        <ul class="list-group list-group-flush">
                            <table class="table" id="menu3">
                                <tr>
                                    <td>皮蛋瘦肉粥</td>
                                    <td>25元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow3(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>西湖牛肉羹</td>
                                    <td>25元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow3(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>紫菜蛋花汤</td>
                                    <td>20元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow3(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>西北胡辣汤</td>
                                    <td>20元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow3(this)">删除</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>海鲜疙瘩汤</td>
                                    <td>30元</td>
                                    <td>
                                        <a class="btn btn-link" href="#" onclick="deleteRow3(this)">删除</a>
                                    </td>
                                </tr>
                            </table>
                        </ul>
                    </div>
                </div>
            </div> -->

            <div class="panel panel-default">
                <div class="panel-heading" id="menu-head">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                            商店菜品
                        </a>
                    </h4>
                </div>
                <div id="collapseOne" class="panel-collapse collapse">
                    <div class="panel-body">
                        <ul class="list-group list-group-flush">
                            <table class="table" id="menu-table">
                                <thead>
                                    <tr>
                                        <td>菜品名称</td>
                                        <td>菜品价格</td>
                                        <td>操作</td>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </ul>
                    </div>
                </div>
            </div>

            <div style="margin-left: 50%;margin-top: 20px">
                <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModalImport" id="import">导入菜单</button>
                <button type="button" class="btn btn-primary btn-lg" style="margin-left: 20px" data-toggle="modal" data-target="#myModalAdd"
                    id="add">添加菜品</button>
                <button type="button" class="btn btn-primary btn-lg" style="margin-left: 20px" id="change" onclick="confirm()">确认修改</button>
            </div>
        </div>

        <div class="modal fade" id="myModalImport" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">导入菜单</div>
                    <div class="modal-body" style="height:600px;">
                        <table class="table table-bordered table-hover" id="importMenu">
                            <thead id="import-head">
                                <tr>
                                    <td style="width:40px">
                                        <input type="checkbox" id="checkAll" name="checkAll" />
                                    </td>
                                    <td style="width:80px">菜品名称</td>
                                    <td style="width:80px">菜品价格</td>
                                    <td>菜品描述</td>
                                </tr>
                            </thead>

                            <tbody id="import-body">
                            </tbody>
                        </table>
                        <ul class="pager">
                            <li>
                                <a href="javascript:;" onclick="previous()">&larr; 上一页</a>
                            </li>
                            <li>
                                <a href="javascript:;" onclick="next()">下一页 &rarr;</a>
                            </li>
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="submitImport()">确定导入</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="myModalAdd" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">添加菜品</div>
                    <div class="modal-body" style="height:770px;">
                        <input type="text" id="itemName" name="itemName" placeholder="菜品名称" />
                        <input type="text" id="tag" name="tag" placeholder="菜品种类">
                        <input type="number" id="itemPrice" name="itemPrice" min="1" placeholder="菜品价格">
                        <input type="number" id="itemNum" name="itemNum" min="1" placeholder="菜品数量（填入999则无限量）">
                        <input type="text" id="description" name="description" placeholder="菜品描述">
                        <h4>菜品图片</h4>
                        <div class="form-group">
                            <div class="col-sm-12">
                                <input id="uploadImg" type="file" class="file" name="file">
                                <input type="hidden" id="JSh_ZhP_Path" />
                                <p class="help-block">支持jpg、jpeg、png、gif格式，大小不超过2.0M</p>
                            </div>
                        </div>
                        <!-- <input id="uploadImg" type="file" multiple class="file" data-overwrite-initial="false" data-max-file-count="1" placeholder="菜品图片"> -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="submitAdd()">确定添加</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!--end-main-container-part-->

    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="js/layer.js"></script>
    <script src="js/typeahead.js"></script>
    <script src="js/matrix.js"></script>
    <script src="js/fileinput.min.js" type="text/javascript"></script>
    <script src="js/fileinput_zh.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery.cookie.js"></script>

    <script type="text/javascript">
        var shop_id;
        var offset = 0;
        var count = 10;
        var url = "";
        var idList = new Array();
        var delMenu = new Array();
        var importMenu = new Array();
        var desList = new Array();
        var nameList = new Array();
        var numList = new Array();
        var typeList = new Array();
        var urlList = new Array();
        var priceList = new Array();

        $('#uploadImg').fileinput({
            uploadAsync: true,
            language: 'zh', //设置语言
            uploadLabel: "上传", //设置上传按钮的汉字
            showCaption: false, //是否显示标题 
            enctype: 'multipart/form-data',
            uploadUrl: "http://10.108.121.54:8084/sellers/me/pictures/goods", //上传的地址
            previewFileType: 'image',
            overwriteInitial: false,
            maxFileSize: 1000,
            maxFilesNum: 10,
            showUpload: true, //是否显示上传按钮
            showCaption: true, //是否显示标题
            browseClass: "btn btn-primary", //按钮样式     
            browseOnZoneClick: true,
            previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
            msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
            dropZoneTitle: "请通过拖拽图片文件放到这里",
            dropZoneClickTitle: "或者点击此区域添加图片",
            ajaxSettings: {
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                },
            },
            slugCallback: function (filename) {
                // alert(filename);
                return filename.replace('(', '_').replace(']', '_');
            }
        });

        $('#uploadImg').on("fileuploaded", function (event, data, previewId, index) {
            var result = data.response; //后台返回的json
            url = url + result.pictureUrl;
            //sellers/picture/shopQualifications/180504135744-20612-eAt7XcyV.png
        });

        function confirm() {
            var delstr = "?";
            for (var i = 0; i < delMenu.length; i++) {
                delstr = delstr + "goodsIds=" + delMenu[i];
                if (i != delMenu - 1) {
                    delstr = delstr + "&";
                }
            }
            $.ajax({
                type: "DELETE",
                url: "http://10.108.121.54:8084/sellers/me/goods" + delstr,
                dataType: "json",
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                },
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    alert("删除菜品成功！");
                    delMenu = [];
                    window.location.reload();
                },
                error: function (data) {
                    alert("删除菜品失败，请重新登陆或等待一段时间后再尝试。");
                    window.location.reload();
                }
            });

            for (var i = 0; i < delMenu.length; i++) {

            }
        }

        function deleteRow(r) {
            var i = r.parentNode.parentNode.rowIndex;
            // idList.pop(i);
            delMenu.push(idList[i - 1]);
            idList.splice(i - 1, 1);
            document.getElementById('menu-table').deleteRow(i);
        };

        function submitImport() {
            //ajax导入菜单
            var data = new Array();
            $("input[name='checkItem']:checked").each(function () {
                // alert(this.value);
                val = parseInt(this.value);
                importMenu.push(val);

                good = {};
                good['description'] = desList[val];
                good['goods_name'] = nameList[val];
                good['goods_type'] = typeList[val];
                good['picture_url'] = urlList[val];
                good['price'] = priceList[val];

                data.push(good);
            });

            $.ajax({
                type: "POST",
                url: "http://10.108.121.54:8084/sellers/me/goodsList",
                dataType: "json",
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                },
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(data),
                success: function (data) {
                    alert("导入菜品成功！");
                    window.location.reload();
                },
                error: function () {
                    alert("导入菜品失败，请重新登陆或等待一段时间后再尝试。");
                }
            });
        };

        function submitAdd() {
            //ajax添加菜品
            var data = {
                "description": $("#description").val(),
                "goods_name": $("#itemName").val(),
                "goods_number": $("#itemNum").val(),
                "goods_type": $("#tag").val(),
                "picture_url": url,
                "price": $("#itemPrice").val()
            }
            $.ajax({
                type: "POST",
                url: "http://10.108.121.54:8084/sellers/me/goods",
                dataType: "json",
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                },
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(data),
                success: function (data) {
                    alert("添加菜品成功！");
                    window.location.reload();
                },
                error: function () {
                    alert("添加菜品失败，请重新登陆或等待一段时间后再尝试。");
                }
            });
        };

        // function Good(id, goods_name, picture_url, description, goods_number, goods_type) {
        //     this.id = id;
        //     this.goods_name = goods_name;
        //     this.price = price;
        //     this.picture_url = picture_url;
        //     this.description = description;
        //     this.goods_number = goods_number;
        //     this.goods_type = goods_type;
        // }

        function previous() {
            if (offset != 0) {
                offset = offset - 10;
                // alert(offset);
                $("#import-body").html("");
                $.ajax({
                    type: "POST",
                    url: "http://10.108.121.54:8084/shops/get_waiting_dish",
                    // dataType: "json",
                    // contentType: 'application/json; charset=UTF-8',
                    data: {
                        "shop_id": shop_id,
                        "offset": offset,
                        "count": count
                    },
                    success: function (data) {
                        desList = [];
                        nameList = [];
                        numList = [];
                        typeList = [];
                        urlList = [];
                        priceList = [];
                        for (var i = 0; i < data.length; i++) {
                            var goods_id = data[i].goods_id;
                            var goods_name = data[i].goods_name;
                            var price = data[i].price;
                            var description = data[i].description;

                            desList.push(description);
                            nameList.push(goods_name);
                            numList.push(goods_number);
                            typeList.push(goods_type);
                            urlList.push(url);
                            priceList.push(price);

                            // var shop = "<td>" + shop_name + "</td><td>" + tag +
                            //     "</td><td>" + addr + "</td>";
                            var good =
                                "<tr><td type='width:200%'><input type='checkbox' name='checkItem' value='" +
                                i + "' /></td><td>" +
                                goods_name + "</td><td>" + price +
                                "元</td><td>" + description + "</td></tr>";
                            $("#import-body").append(good);
                        }
                    },
                    error: function () {
                        alert("未找到相关店铺。");
                    }
                });
            } else {
                alert("已经是第一页啦！");
            }
        }

        function next() {
            offset = offset + 10;
            // alert(offset);
            $("#import-body").html("");
            $.ajax({
                type: "POST",
                url: "http://10.108.121.54:8084/shops/get_waiting_dish",
                // dataType: "json",
                // contentType: 'application/json; charset=UTF-8',
                data: {
                    "shop_id": shop_id,
                    "offset": offset,
                    "count": count
                },
                success: function (data) {
                    desList = [];
                    nameList = [];
                    numList = [];
                    typeList = [];
                    urlList = [];
                    priceList = [];
                    for (var i = 0; i < data.length; i++) {
                        var goods_id = data[i].goods_id;
                        var goods_name = data[i].goods_name;
                        var price = data[i].price;
                        var description = data[i].description;

                        desList.push(description);
                        nameList.push(goods_name);
                        numList.push(goods_number);
                        typeList.push(goods_type);
                        urlList.push(url);
                        priceList.push(price);

                        // var shop = "<td>" + shop_name + "</td><td>" + tag +
                        //     "</td><td>" + addr + "</td>";
                        var good =
                            "<tr><td type='width:200%'><input type='checkbox' name='checkItem' value='" +
                            i + "' /></td><td>" +
                            goods_name + "</td><td>" + price +
                            "元</td><td>" + description + "</td></tr>";
                        $("#import-body").append(good);
                    }
                },
                error: function () {
                    alert("未找到相关店铺。");
                }
            });
        }

        $('#myModalImport').on('show.bs.modal', function (e) {
            $("#import-body").html("");
            //ajax获取候选菜单
            $.ajax({
                type: "POST",
                url: "http://10.108.121.54:8084/shops/get_waiting_dish",
                data: {
                    "shop_id": "103840",
                    "offset": offset,
                    "count": count
                },
                success: function (data) {
                    desList = [];
                    nameList = [];
                    numList = [];
                    typeList = [];
                    urlList = [];
                    priceList = [];
                    for (var i = 0; i < data.length; i++) {
                        var goods_id = data[i].id;
                        var goods_name = data[i].goods_name;
                        var price = data[i].price;
                        var url = data[i].picture_url;
                        var goods_type = data[i].goods_type;
                        var description = data[i].description;

                        desList.push(description);
                        nameList.push(goods_name);
                        // numList.push(goods_number);
                        typeList.push(goods_type);
                        urlList.push(url);
                        priceList.push(price);

                        // var shop = "<td>" + shop_name + "</td><td>" + tag +
                        //     "</td><td>" + addr + "</td>";
                        var good =
                            "<tr><td type='width:200%'><input type='checkbox' name='checkItem' value='" +
                            i + "' /></td><td>" +
                            goods_name + "</td><td>" + price +
                            "元</td><td>" + description + "</td></tr>";
                        $("#import-body").append(good);
                    }
                },
                error: function () {
                    alert("未找到相关店铺。");
                }
            });
        });

        $(function () {
            // alert("123");
            if ($.cookie("id") != null) {
                shop_id = $.cookie("id");
                // var avatar_url = $.cookie("al_avatar_url");
                $("#user-nav").append(
                    "<ul class='nav'><li class='dropdown'id='profile-messages'><a title=''href='#'data-toggle='dropdown'data-target='#profile-messages'class='dropdown-toggle'><i class='icon icon-user'></i><span class='text'>选项</span><b class='caret'></b></a><ul class='dropdown-menu'><li><a href='#'><i class='icon-user'></i>个人设置</a></li><li class='divider'></li><li><a href='#'><i class='icon-check'></i>我的任务</a></li><li class='divider'></li><li><a href='#'><i class='icon-key'></i>登出</a></li></ul></li><li class='dropdown'id='menu-messages'><a href='#'data-toggle='dropdown'data-target='#menu-messages'class='dropdown-toggle'><i class='icon icon-envelope'></i><span class='text'>消息</span><span class='label label-important'>5</span><b class='caret'></b></a><ul class='dropdown-menu'><li><a class='sAdd'title=''href='#'><i class='icon-plus'></i>发送消息</a></li><li class='divider'></li><li><a class='sInbox'title=''href='#'><i class='icon-envelope'></i>收件箱</a></li><li class='divider'></li><li><a class='sTrash'title=''href='#'><i class='icon-trash'></i>清空通知</a></li></ul></li><li class=''><a title=''href='login.html'><i class='icon icon-share-alt'></i><span class='text'>登出</span></a></li></ul>"
                );

                //ajax获取菜品
                $.ajax({
                    type: "GET",
                    url: "http://10.108.121.54:8084/sellers/me/goods",
                    dataType: "json",
                    crossDomain: true,
                    xhrFields: {
                        withCredentials: true
                    },
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        var menu = new Array();
                        for (var i = 0; i < data.length; i++) {
                            // var obj = JSON.parse(data[i]);

                            var id = data[i].id;
                            var goods_name = data[i].goods_name;
                            var price = data[i].price;
                            var picture_url = data[i].picture_url;
                            var description = data[i].description;
                            var goods_number = data[i].goods_number;
                            idList.push(id);

                            var good = "<tr><td>" + goods_name + "</td><td>" + price +
                                "元</td><td><a class='btn btn-link' href='#' onclick='deleteRow(this)' value= '" +
                                id + "'>删除</a></td></tr>";
                            $("#menu-table").append(good);

                            // if (menu[goods_type] == null) {
                            //     menu[goods_type] = new Array();
                            //     menu[goods_type].push(new Good(id, goods_name, picture_url,
                            //         description, goods_number, goods_type));
                            // } else {
                            //     menu[goods_type].push(new Good(id, goods_name, picture_url,
                            //         description, goods_number, goods_type));
                            // }
                        }

                        // for (key in menu) {
                        //     for (var i = 0; i < menu[key].length; i++) {

                        //     }
                        // }
                    },
                    error: function () {
                        alert("获取菜品失败，请重新登陆或等待一段时间后再尝试。");
                    }
                });
            } else {
                $("#user-nav").append(
                    "<a href='login.html' style='font-size: 200%;'>登录</a><a href='#' style='font-size: 200%;'>  |  </a><a href='register.html' style='font-size: 200%;'>注册</a>"
                );
            }
        });

        $("#checkAll").click(function () {
            if ($(this).is(':checked') == true) { // 全选
                $(":checkbox").each(function () {
                    $(this).prop("checked", true);
                    $(this).parent("span").addClass("checked");
                });
            } else {
                $(":checkbox").each(function () {
                    $(this).prop("checked", false);
                    $(this).parent("span").removeClass("checked");
                });
            }
        });
    </script>
</body>

</html>